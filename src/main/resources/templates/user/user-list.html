<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>사용자 목록 조회</title>
    <link rel="stylesheet" href="/css/list.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
</head>
<body th:replace="~{layout::layout}">
<div th:fragment="content" class="container">
    <h2 class="mb-4" style="font-weight: bold;">👥 사용자 목록</h2>
    <form method="get" th:action="@{/admin/users/search}" class="row g-2 align-items-center search-form">
        <div class="col-auto">
            <select name="searchType" class="form-select">
                <option value="name">별명</option>
                <option value="email">이메일</option>
            </select>
        </div>
        <div class="col-auto">
            <input type="text" name="keyword" class="form-control" placeholder="검색어 입력">
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-primary">검색</button>
        </div>
    </form>

    <div class="table-responsive">
        <table class="table table-bordered table-hover table-striped align-middle text-center">
            <thead class="table-light">
            <tr>
                <th>User ID</th>
                <th>프로필 사진</th>
                <th>이메일</th>
                <th>닉네임</th>
                <th>OAuth Provider</th>
                <th>OAuth ID</th>
                <th>FCM Token</th>
                <th>구독 상태</th>
                <th>권한</th>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="user : ${userList}">
                <tr>
                    <td>[[${user.userId}]]</td>
                    <td>
                        <img th:src="${user.profileImageUrl}" alt="프로필 사진" class="profile-img">
                    </td>
                    <td>
                        <a th:href="@{/admin/users/{userId}(userId=${user.userId})}" class="table-link">[[${user.email}]]</a>
                    </td>
                    <td>
                        <a th:href="@{/admin/users/{userId}(userId=${user.userId})}" class="table-link">[[${user.nickname}]]</a>
                    </td>
                    <td>[[${user.oauthProvider}]]</td>
                    <td>[[${user.oauthId}]]</td>
                    <td class="text-truncate" style="max-width: 200px;">[[${user.fcmToken}]]</td>
                    <td>[[${user.subscriptionStatus}]]</td>
                    <td>[[${user.role}]]</td>
                </tr>
            </th:block>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>